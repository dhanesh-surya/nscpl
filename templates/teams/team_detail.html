{% extends 'base.html' %}

{% block title %}{{ team.name }} - NSCPL{% endblock %}

{% block content %}
<div class="container mt-5 pt-5">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <h1 class="mb-4 text-center">{{ team.name }}</h1>
            {% if team.logo %}
                <div class="text-center mb-4">
                    <img src="{{ team.logo.url }}" class="img-fluid rounded mb-3" alt="{{ team.name }}" style="max-height:200px; object-fit:contain;">
                </div>
            {% endif %}

            <div class="card card-body mb-4">
                <p class="lead">{{ team.description|safe }}</p>
                {% if team.founded_date %}
                <p class="text-muted">Founded: {{ team.founded_date|date:"Y" }}</p>
                {% endif %}
                {% if team.coach %}
                <p class="text-muted">Coach: {{ team.coach.get_full_name|default:team.coach.username }}</p>
                {% endif %}
            </div>

            <h3 class="mt-4">Players</h3>
            {% if players %}
            <div class="row">
                {% for player in players %}
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-body d-flex gap-3 align-items-center">
                            {% if player.photo %}
                            <img src="{{ player.photo.url }}" alt="{{ player.name }}" class="rounded" style="width:72px; height:72px; object-fit:cover;">
                            {% endif %}
                            <div>
                                <h5 class="mb-0">{{ player.name }}</h5>
                                <small class="text-muted">Jersey #: {{ player.jersey_number }}</small>
                                {% if player.position %}
                                <div class="small">{{ player.position }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-muted">No players available for this team.</p>
            {% endif %}

            <div class="d-flex justify-content-between mt-4">
                <a href="{% url 'teams:team_list' %}" class="btn btn-primary">Back to Teams</a>
                {% if request.user.is_staff %}
                <a href="{% url 'admin:teams_team_change' team.pk %}" class="btn btn-secondary">Edit Team</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
